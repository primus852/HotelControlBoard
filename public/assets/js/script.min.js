String.prototype.escapeHTML=function(){return(this.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;"))};var $version="0.5.0";var cols={},messageIsOpen=false;$(function(){startTime(1);$("input").attr("autocomplete","off");$(window).hashchange(function(){var f=location.hash.replace(/^#/,"");if(f===""){$(".trigger-message-close").trigger("click")}});var e=$("#perfectScroll");if(e.length){new PerfectScrollbar("#perfectScroll")}var d=$(".perfectScroll");if(d.length){new PerfectScrollbar(".perfectScroll")}new PerfectScrollbar("#pScrollerMenu");initModal();var a=$(".tt");if(a.length){initTooltips(".tt")}var c=$(".calendar");if(c.length){initCalendar(".calendar")}$(window).hashchange();var b=$("#"+GetNav);if(!b.is(":visible")){b.parent().prev("a").trigger("click")}b.addClass("active");initOverlays();detectHash();$(".search-box input").on("focus",function(){if($(window).width()<=1360){cols.hideMessage()}})});$(document).on("click",".toggleTree",function(b){b.preventDefault();var c=$(this).next(".treeMenu");var a=$(this).children("i");if(c.is(":visible")){a.removeClass("fa-chevron-down").addClass("fa-chevron-right")}else{a.removeClass("fa-chevron-right").addClass("fa-chevron-down")}c.toggle(200)});$(document).on("click",".clickable",function(c){c.preventDefault();if(!$(this).hasClass("innerMessage")){window.location.hash=$(this).attr("data-hash")}if($(this).hasClass("search-box")){$(".js-search-message").trigger("click")}var b=Math.floor((Math.random()*10000)+1);$("body").append('<div class="messageFly" id="'+b+'"></div>');var a=$("#"+b);a.show();loadDetails($(this),b);if(messageIsOpen){if(!$(this).hasClass("innerMessage")){cols.hideMessage()}setTimeout(function(){cols.showMessage()},300)}else{cols.showMessage()}cols.showOverlay()});$(document).on("click","#js-add-rate",function(d){d.preventDefault();var c=$(this);var b=c.attr("data-url");var a='Would you like to add another Ratetype?<br />\n<div class="row">\n    <div class="col-10">\n        <input placeholder="Rate Name (e.g. Best available Rate)" value="" type="text" id="rate-name"/>\n    </div>\n</div>\n<div class="row">\n    <div class="col-10">\n        <input placeholder="Rate Name Short (e.g. BAR)" value="" type="text" id="rate-name-short"/>\n    </div>\n</div>\n<div class="row">\n    <div class="col-1">\n        <input style="position:relative;top:10px;" type="checkbox" id="rate-is-base">\n    </div>\n    <div class="col-9">\n        <span style="position:relative;top:10px;">is Baserate<br />(Discounts will be applied from this rate)</span>\n    </div>\n</div>';x0p({title:"Add Ratetype",text:a,html:true,maxHeight:"400px",maxWidth:"500px",animationType:"fadeIn",buttons:[{type:"ok",text:"Save",showLoading:true},{type:"error",text:"Cancel",showLoading:false}]}).then(function(g){if(g.button==="ok"){var e=$.trim($("#rate-name").val());var f=$.trim($("#rate-name-short").val());var h=$("#rate-is-base:checked").val()?"yes":"no";$.post(b,{name:e,nameShort:f,isBase:h}).done(function(i){if(i.result==="success"){x0p("Success",i.extra.name+" added","ok",false)}else{x0p("Error",i.message,"error",false)}}).fail(function(){openNoty("error","Ajax Error")})}})});$(document).on("click","#js-add-room",function(f){f.preventDefault();var d=$(this);var c=d.attr("data-url");var a=$("#js-result-table");var b='Would you like to add another Roomtype?<br />\n<div class="row">\n    <div class="col-10">\n        <input placeholder="Room Name (e.g. Standard King)" value="" type="text" id="room-name"/>\n    </div>\n</div>\n<div class="row">\n    <div class="col-10">\n        <input placeholder="Room Name Short (e.g. STDK)" value="" type="text" id="room-name-short"/>\n    </div>\n</div>\n<div class="row">\n    <div class="col-10">\n        <input placeholder="Max Occupancy (e.g. 2)" value="" type="text" id="room-occ"/>\n    </div>\n</div>';x0p({title:"Add Roomtype",text:b,html:true,maxHeight:"400px",maxWidth:"500px",animationType:"fadeIn",buttons:[{type:"ok",text:"Save",showLoading:true},{type:"error",text:"Cancel",showLoading:false}]}).then(function(i){if(i.button==="ok"){var e=$.trim($("#room-name").val());var g=$.trim($("#room-name-short").val());var h=$.trim($("#room-occ").val());$.post(c,{name:e,nameShort:g,occ:h}).done(function(j){if(j.result==="success"){a.append('<div class="row table-font" style="border-bottom:1px solid #ccc;" id="row_'+j.extra.type+"_"+j.extra.id+'">\n       <div class="col-2">'+j.extra.nameShort+'</div>\n       <div class="col-7">'+j.extra.name+'</div>\n       <div class="col-1">'+j.extra.maxOcc+'</div>\n       <div class="col-1"><span class="badge badge-success">active</span></div>\n       <div class="col-1">\n               <a href="#" class="btn btn-success btn-sm rounded-0 tt clickable" title="View Details"           data-url="'+j.extra.link+'"           data-hash="details-roomtype-'+j.extra.id+'"           data-trigger="'+j.extra.id+'"       >\n                       <i class="fa fa-info-circle"></i> Details\n               </a>\n       </div>\n</div>');x0p("Success",j.extra.name+" added","ok",false)}else{x0p("Error",j.message,"error",false)}}).fail(function(){openNoty("error","Ajax Error")})}})});$(document).on("click","#js-remove-entity",function(f){f.preventDefault();var d=$(this);var b=d.attr("data-url");var a=d.attr("data-name");var c=d.attr("data-type");var g=d.attr("data-id");x0p({title:'<span style="color:#dc1327;">Attention</span>',text:"Would you like to remove <strong>"+a+'</strong>?<br /><br /><span style="color:#dc1327;">This action cannot be undone!</span>',html:true,maxHeight:"200px",maxWidth:"300px",animationType:"fadeIn",buttons:[{type:"ok",text:"Yes, remove!",showLoading:true},{type:"error",text:"Cancel",showLoading:false}]}).then(function(e){if(e.button==="ok"){$.post(b,{type:c,id:g}).done(function(h){if(h.result==="success"){closeDetails(function(){var i=$("#row_"+c+"_"+g);if(i.length){i.remove()}});x0p("Success",a+" removed","ok",false)}else{x0p("Error",h.message,"error",false)}}).fail(function(){openNoty("error","Ajax Error")})}})});$(document).on("click",".js-toggle-active",function(g){g.preventDefault();var f=$(this);var a=f.html();var c=f.attr("data-url");var b=f.attr("data-set");var d=f.attr("data-type");var h=f.attr("data-id");if(f.hasClass("disabled")){return false}f.addClass("disabled").html('<i class="fa fa-spin fa-spinner"></i>');$.post(c,{type:d,id:h,to_set:b}).done(function(i){f.removeClass("disabled").html(a);if(i.result==="success"){openNoty(i.result,i.message);var e=$("#status_"+d+"_"+h);if(e.length){e.removeClass("badge-danger").removeClass("badge-success").addClass("badge-"+i.extra.b_class).html(i.extra.b_html)}f.attr("data-set",i.extra.to_set_new).html(i.extra.html_new)}else{x0p("Error",i.message,"error",false)}}).fail(function(){openNoty("error","Ajax Error")})});function openNoty(a,b){new Noty({layout:"topRight",theme:"sunset",text:b,type:a,timeout:3000,buttons:false}).show()}function loadDetails(b,c){var a=$("#"+c);a.html('<i class="fa fa-spin fa-spinner fa-4x"></i>');$.post(b.attr("data-url")).done(function(e){a.html(e);var d=window.location.hash.split("load-");if(d.length){$('[data-device="'+d[1]+'"]').trigger("click")}$("#menuToggle > input").trigger("click");initOverlays();initModal();initScrollbar(".subScroll");initTooltips(".tt");$(".tooltipster-show").removeClass("tooltipster-show")})}function initOverlays(){cols.showOverlay=function(){$("body").addClass("show-main-overlay")};cols.hideOverlay=function(){$("body").removeClass("show-main-overlay")};cols.showMessage=function(){$("body").addClass("show-message");messageIsOpen=true};cols.hideMessage=function(){$("body").removeClass("show-message");messageIsOpen=false};cols.showSidebar=function(){$("body").addClass("show-sidebar")};cols.hideSidebar=function(){$("body").removeClass("show-sidebar")};$(".trigger-toggle-sidebar").on("click",function(){cols.showSidebar();cols.showOverlay()});$(".trigger-message-close").on("click",function(){var a=$(this).closest(".messageFly");if($(".messageFly").length<=1){cols.hideMessage();a.remove();history.pushState("",document.title,window.location.pathname)}else{a.animate({left:"9999px"},function(){a.remove()})}});$("#main > .overlay").on("click",function(){cols.hideOverlay();cols.hideMessage();cols.hideSidebar()})}function closeDetails(a){if(typeof a==="function"){$(".trigger-message-close").trigger("click",a())}else{$(".trigger-message-close").trigger("click")}}function detectHash(){var a=window.location.hash;if(!a.length){return false}$("[data-hash="+a.replace("#","")+"]").trigger("click")}function startTime(f){var b=new Date();var e=b.getHours();var a=b.getMinutes();var d=b.getSeconds();a=checkTime(a);d=checkTime(d);$("#startClock").html("@"+e+":"+a+":"+d+" Uhr");var c=setTimeout(startTime,1000)}function checkTime(a){if(a<10){a="0"+a}return a}function initModal(){[].slice.call($(".md-trigger")).forEach(function(c,b){var a=$("#"+c.getAttribute("data-modal"));c.addEventListener("click",function(d){a.addClass("md-show")})})}function initTooltips(a){$(a).tooltipster({theme:"tooltipster-punk",contentAsHTML:true,debug:false})}function initScrollbar(a){if($(a).length){new PerfectScrollbar(a,{suppressScrollX:true})}};